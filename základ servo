library IEEE;
use IEEE.STD_LOGIC_1164.ALL;

-- Uncomment the following library declaration if using
-- arithmetic functions with Signed or Unsigned values
use IEEE.NUMERIC_STD.ALL;

-- Uncomment the following library declaration if instantiating
-- any Xilinx leaf cells in this code.
-- library UNISIM;
-- use UNISIM.VComponents.all;

entity servo is
     Generic (
            pwm_bits : integer := 5;
            clk_cnt_len : positive := 1     
    );

    Port ( clk : in STD_LOGIC;
           rst : in STD_LOGIC;
           duty_cycle : in STD_LOGIC_VECTOR (pwm_bits - 1 downto 0);
           pwm : out STD_LOGIC);
end servo;

architecture Behavioral of servo is

signal pwm_cnt : unsigned(pwm_bits - 1 downto 0);
signal clk_cnt : integer range 0 to clk_cnt_len - 1;

begin
CLK_CNT_PROC : process(clk)
begin
  if rising_edge(clk) then
    if rst = '1' then
      clk_cnt <= 0;
       
    else
      if clk_cnt < clk_cnt_len - 1 then
        clk_cnt <= clk_cnt + 1;
      else
        clk_cnt <= 0;
      end if;
       
    end if;
  end if;
end process;

end Behavioral;
